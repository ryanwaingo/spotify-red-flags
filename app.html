<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spotify Dating Red Flags</title>

  <style>
    /* --- unchanged styles (exactly as before) --- */
    /* (I am intentionally not modifying layout, capture, or auth CSS) */
  </style>
</head>

<body>
  <!-- existing HTML structure unchanged -->

  <script>
    /* ===============================
       VIRAL SHARE COPY (UPDATED)
       =============================== */

    function buildShareCaption(platform = "ig") {
      const flags = Array.from(document.querySelectorAll("#flagsList li"))
        .slice(0, 2)
        .map(li => li.textContent.replace("üö©", "").trim());

      const top = flags[0] || "has questionable taste";
      const second = flags[1] || "";

      const baseUrl = "https://ryanwaingo.github.io/spotify-red-flags/";

      if (platform === "x") {
        return (
          `Spotify Dating Red Flags just exposed me.\n\n` +
          `Mine says I ${top.toLowerCase()}.\n\n` +
          `What does yours say? üëÄ\n` +
          baseUrl
        );
      }

      // Instagram / TikTok default
      return (
        `üö© My Spotify listening just exposed my dating red flags\n\n` +
        `Apparently I:\n` +
        `‚Ä¢ ${top}\n` +
        (second ? `‚Ä¢ ${second}\n` : "") +
        `\nWhat does yours say? üëÄ\n` +
        baseUrl
      );
    }

    /* ===============================
       BUTTON HOOKS (UPDATED)
       =============================== */

    document.getElementById("btnCopyCaption")?.addEventListener("click", () => {
      const caption = buildShareCaption("ig");
      navigator.clipboard.writeText(caption);
      showToast("Caption copied ‚Äî now expose your friends.");
    });

    document.getElementById("btnShareX")?.addEventListener("click", (e) => {
      e.preventDefault();
      const text = encodeURIComponent(buildShareCaption("x"));
      window.open(`https://twitter.com/intent/tweet?text=${text}`, "_blank");
    });

    document.getElementById("btnShareIG")?.addEventListener("click", () => {
      showToast("Save the image, then post to IG Stories.");
    });

    document.getElementById("btnShareTT")?.addEventListener("click", () => {
      showToast("Save the image, then upload to TikTok.");
    });

    /* ===============================
       MICRO COPY (UPDATED)
       =============================== */

    const shareNote = document.getElementById("shareNote");
    if (shareNote) {
      shareNote.textContent =
        "‚ö†Ô∏è Compare with friends. Someone will be worse than you.";
    }
  </script>
</body>
</html>
